# API: Сервис поиска ближайших машин для перевозки грузов.

Тестовое задание

# Технологии
Сервис реализован на DjangoRestFramework
Python версии 3.10
База данных - PostgreSQL
ORM - DjangoORM
Проект разворачивается с помощью docker compose

## Описание работы

При запуске приложения БД инициализируется следующими данными:
 1. Списком уникальных локаций, представленых в csv файле "uszips.csv". Каждая локация содержит в себе следующие характеристики:
    - город;
    - штат;
    - почтовый индекс (zip);
    - широта;
    - долгота.
 2. Списком из 20 машин. Каждая машина - включает следующие характеристики:
    - уникальный номер (цифра от 1000 до 9999 + случайная заглавная буква английского алфавита в конце, пример: "1234A", "2534B", "9999Z")
    - текущая локация;
    - грузоподъемность (1-1000).
    При создании машин по умолчанию локация каждой машины заполняется случайным образом;

Сервис поддерживает следующие базовые функции:

**Уровень 1:**

- Получение информации о конкретной локации по ID.
- Получение списка машин.
- Редактирование машины по ID (локация (определяется по введенному zip-коду));
- Создание нового груза (характеристики локаций pick-up, delivery определяются по введенному zip-коду);
- Получение списка грузов (локации pick-up, delivery, количество ближайших машин (с подходящей грузоподъемностью) до груза);
- Получение информации о конкретном грузе по ID (локации pick-up, delivery, вес, описание, список номеров ВСЕХ машин (с подходящей грузоподъемностью) с расстоянием до выбранного груза);
- Редактирование груза по ID (вес, описание);
- Удаление груза по ID.

## Установка и запуск:

# Предварительные условия
 
Предполагается, что пользователь установил [Docker](https://docs.docker.com/engine/install/) и [Docker Compose](https://docs.docker.com/compose/install/) на локальной машине или на удаленном сервере, где проект будет запускаться в контейнерах. Проверить наличие можно выполнив команды:

```bash
docker --version && docker-compose --version
```
<h1></h1>
  
# Локальный запуск: Docker Compose

1. Клонируйте репозиторий с GitHub переменные окружения уже находятся в корневой папке проекта для удобства:

```bash
git clone git@github.com:LoG1s7/cargo_transportation_api.git && \
cd cargo_transportation_api&& \
```

2. Из корневой директории проекта выполните команду:
```bash
sudo docker compose -f infra/docker-compose.yml up -d --build
```
  Проект будет развернут в трех docker-контейнерах (db, web, nginx) по адресу http://localhost/api/.

3. Чтобы выполнить миграции и наполнить базу тестовыми данными выполните команду:
```bash
sudo docker compose -f infra/docker-compose.yaml exec web python manage.py migrate
```
4. Остановить docker и удалить контейнеры можно командой из корневой директории проекта:
```bash
sudo docker compose -f infra/docker-compose.yml down
```
  Если также необходимо удалить том базы данных:
```bash
docker compose -f infra/docker-compose.yml down -v
```
<h1></h1>

## Автор
[Aleksandr Kolesnikov](https://github.com/log1s7)

